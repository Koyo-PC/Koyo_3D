name: Render

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2
#      - name: Blender Install
#        run: sudo snap install blender --classic
#      - name: Render
#        run: blender --background -noaudio 3dMap.blend --threads 0 --python ./actions/render.py
#        run: blender --background -noaudio 3dMap.blend --threads 0 --render-output //export/out.png --render-resolution 1920x1080

      - uses: actions/github-script@v3
        with:
          github-token: ${{secrets.GITHUB_TOKEN}}
          script: |
            console.log("--- a ---");
            // console.log(github);
            console.log(context.payload.context);
            console.log("--- b ---");
            // console.log(github.context);
            console.log(context);
            console.log("--- c ---");
            // console.log(github.rest);
            console.log(github.context.commits);
            console.log("--- d ---");
            console.log(context.commits);
            console.log("--- e ---");
            github.rest.commit.createComment({
              commit_id: context.commit.id,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'test text'
            });